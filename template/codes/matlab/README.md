## References

+ [A Quick Tutorial on MATLAB](<https://web.eecs.umich.edu/~aey/eecs451/matlab.pdf>)

## Key Points
+ `~=`
+ `'`: matrix transpose
## Start up
1. Run GUI
```
matlab
```

2. Use System prompt
```
matlab -nojvm -nodisplay -nosplash
```



## Codes

1. array

```matlab
x = [1, 2, 3, 4; 5, 6, 7, 8; 9, 10, 11, 12]
%---------------------------------
%     1     2     3     4
%     5     6     7     8
%     9    10    11    12
%---------------------------------

x(2, 4) % subscript starts from 1
%---------------------------------
%     8
%---------------------------------

x(2:3, 3:4) % inclusive
%---------------------------------
%     7     8
%    11    12
%---------------------------------


x(3) % 9 Column First

x(4) % 2

```

2. operation
	1. element-wise 
	```
	x.*y
	%-------------------------------------------------
    %          10          40          90         160
    %         250         360         490         640
    %         810        1000        1210        1440
	%-------------------------------------------------

    x./y
	%-------------------------------------------------
    %    0.1000    0.1000    0.1000    0.1000
    %    0.1000    0.1000    0.1000    0.1000
    %    0.1000    0.1000    0.1000    0.1000
	%-------------------------------------------------

	x + y
	%-------------------------------------------------
    %    11    22    33    44
    %    55    66    77    88
    %    99   110   121   132
	%-------------------------------------------------

    x - y
	%-------------------------------------------------
    %    -9   -18   -27   -36
    %   -45   -54   -63   -72
    %   -81   -90   -99  -108
	%-------------------------------------------------
	```
	2. Matrix Multiplication
	```
	x = [1, 2, 3]
	%-------------------------------
    %     1     2     3
	%-------------------------------

    y = [4, 5; 6, 7; 8, 9]
	%-------------------------------
    %     4     5
    %     6     7
    %     8     9
	%-------------------------------

    x * y
	%-------------------------------
    %    40    46
	%-------------------------------
	```

3. Function
    1. zeros
    ```
    x = zeros(2, 4)
    %-------------------------------------------------
    %     0     0     0     0
    %     0     0     0     0
    %-------------------------------------------------
    ```
    2. sort
    ```
    x = [3, 1, 4; 6, 5, 2]
    sort(x) % column; sort(x, 2) => row wise
    %-------------------------------------------------
    %     3     1     2
    %     6     5     4
    %-------------------------------------------------
    
    ```
    3. prod, sum, mean, median, std, var, max, min
    ```
    x
    %-------------------------------------------------
    %     1     2     3
    %     4     5     6
    %-------------------------------------------------

    prod(x, 1) % = prod(x) column wise
    %-------------------------------------------------
    %     4    10    18
    %-------------------------------------------------


    prod(x, 2) % row wise
    %-------------------------------------------------
    %     6
    %   120
    %-------------------------------------------------

    prod(x, 3)
    %-------------------------------------------------
    %     1     2     3
    %     4     5     6
    %-------------------------------------------------

    ```
    4. ones, diag, tril / triu
    ```
    diag(1:3)
    %-------------------------------------------------
    %     1     0     0
    %     0     2     0
    %     0     0     3
    %-------------------------------------------------

    ones(3) * diag(1:3)  
    %-------------------------------------------------
    %     1     2     3
    %     1     2     3
    %     1     2     3
    %-------------------------------------------------

    tril(ones(3) * diag(1:3))
    %-------------------------------------------------
    %     1     0     0
    %     1     2     0
    %     1     2     3
    %-------------------------------------------------
    ```
    5. sprintf
    ```
    dir = 'scaled/'
    pname = 'mushroom'
    probLoad = sprintf(['../datasets/', dir, pname, '.mat'])
    %-------------------------------------------------
    %    '../datasets/scaled/mushroom.mat'
    %-------------------------------------------------
    ```
    6. randn, size
    ```
    x = randn(2, 3, 4);
    size(x); % return [2, 3, 4]
    size(x, 1); % return 2
    size(x, 2); % return 3
    ```


4. Load & Save
```
x = [1, 2, 3; 4, 5, 6]
save('x.mat', 'x')
x = [1, 2]      
load('x.mat') % load add the variables      

x
%------------------------------
%     1     2     3
%     4     5     6
%------------------------------

```

5. File
```
fid = fopen('test.txt', 'w')
%------------------------------
%     3
%------------------------------

count = fwrite(fid, 'Hello') % Hello (no newline); matrix is allowed
%------------------------------
%     5
%------------------------------

fclose(fid)
%------------------------------
%     0
%------------------------------
```


6. Flow Control
```
x = zeros(1, 22)
for i = 1:22
    x(i) = i
end

% x = 1:22
```


7. time
```
start_time = tic;
end_time = toc(start_time); % seconds
```

## Files

1. function
```
% fact.m
%++++++++++++++++++++++++++++
function f = fact(n)
    f = prod(1:n);
end
%++++++++++++++++++++++++++++


>> fact(5) % 120
```


2. run script in the file. (`run` is a special function. Note that in 2-1, the function name should be the same as the file name.)
1)
```
% hello.m
%++++++++++++++++++++++++++++
fprintf('Hello\n');
%++++++++++++++++++++++++++++


>> run('hello.m'); % Hello

% <=> matlab -nojvm -nodesktop -nodisplay -nosplash -r "run('hello.m');exit;"
```
2)
```
% hello.m
%++++++++++++++++++++++++++++
function hello()
    fprintf('Hello\n');
end
%++++++++++++++++++++++++++++


>> hello(); % Hello

% <=> matlab -nojvm -nodesktop -nodisplay -nosplash -r "hello();exit;"
```

3. runprob. `runprob.m` is a file with function named 'runprob'
```
matlab -nojvm -nodesktop -nodisplay -nosplash -r "runprob('mushroom', true);exit;"
```

## Tips
1. Avoid inner loop


## Examples
1.
```
% Bad Case
y = zeros(1,3);
for n = 1:3
    for k = 0:19
        y(n)= y(n)+h(k)*x(n+k);
    end
end


% Avoids inner loop
for n = 1:3
    y(n) = h*x(n:(n+18))';
end

% Avoids both the loops
x = [x(1:19)', x(2:20)', x(3:21)'] % (19, 3)
y = h * x % (1, 3) <- (1, 19) * (19, 3)
```
2. 
```
y = ones(1, 20);
tmp = 1
for n = 2:20
    tmp = tmp + n^3;
    fprintf('%d\n', tmp);
    y(n) = y(n - 1) * tmp;
end
```



